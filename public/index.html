<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kahoot Access</title>
  <style>
    /* Style remains unchanged from the original */
  </style>
</head>
<body>
  <div class="popup">Invalid or used code</div>

  <div class="container" id="login">
    <h1>Enter Access Code</h1>
    <form id="codeForm">
      <input type="text" id="codeInput" name="code" placeholder="Enter your 7-digit code" required />
      <button type="submit">Submit</button>
    </form>
  </div>

  <div class="kahoot-container" id="kahoot">
    <iframe id="kahootIframe" src="https://kahoot.club/" allowfullscreen></iframe>
  </div>

  <script>
    // Show the popup when an invalid code is entered
    function showPopup() {
      const popup = document.querySelector(".popup");
      popup.style.display = "block";
      setTimeout(() => {
        popup.style.display = "none";
      }, 1000);
    }

    document.getElementById("codeForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const code = document.getElementById("codeInput").value;

      const response = await fetch("/", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: new URLSearchParams({ code })
      });

      if (response.redirected || code === "goobers") {
        // Valid code or "goobers", show Kahoot iframe
        document.getElementById("login").style.display = "none";
        document.getElementById("kahoot").style.display = "flex";  // Show Kahoot iframe
      } else {
        showPopup();  // Invalid code entered
      }
    });
  </script>
</body>
</html>

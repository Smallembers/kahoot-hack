<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Exploit Hub</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>Welcome to Exploit Hub</h1>
    <div class="popup" id="popup">Access Granted</div>
    
    <!-- Timer Section -->
    <div class="timer" id="timer">00:00</div>

    <button id="kahootBtn" onclick="startKahoot()">Go to Kahoot</button>

    <!-- Hidden Kahoot Frame -->
    <iframe id="kahootFrame" src="https://kahoot.it" frameborder="0"></iframe>
  </div>

  <script>
    let timer;
    let seconds = 0;
    let isInfinite = false; // Flag to track if it's an infinite timer session
    let timerInterval;

    // Function to update the timer
    function updateTimer() {
      if (!isInfinite) {
        if (seconds <= 0) {
          clearInterval(timerInterval);
          return;
        }
        seconds--;
      }

      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      document.getElementById("timer").textContent = `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
    }

    // Start the timer countdown
    function startTimer(duration) {
      seconds = duration;
      timerInterval = setInterval(updateTimer, 1000);
    }

    // Bypass timer if "goobers" code is used
    function startKahoot() {
      if (document.cookie.includes("goobers")) {
        isInfinite = true;
        seconds = 9999; // Keep the timer at 99:99 indefinitely
      } else {
        isInfinite = false;
        startTimer(60 * 60); // Start 1 hour timer
      }

      // Show Kahoot iframe and hide the menu
      document.getElementById("kahootFrame").classList.add("show");
      document.getElementById("kahootBtn").style.display = 'none';
      document.getElementById("popup").style.display = 'none';
    }

    // Simulate a "code entered" state (for testing or after a real check)
    function codeEntered() {
      startKahoot();
      document.getElementById("popup").style.display = 'block';
    }

    // Initialize with code entering state
    codeEntered();
  </script>
</body>
</html>
